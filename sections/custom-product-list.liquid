{% schema %}
{
  "name": "Custom Product List",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Featured Products"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Select Collection"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "min": 4,
      "max": 12,
      "step": 1,
      "default": 8,
      "label": "Products to show"
    }
  ],
  "presets": [
    {
      "name": "Custom Product List"
    }
  ]
}
{% endschema %}

<section class="hk-section">
  <div class="page-width">

    <h2 class="hk-section-title">
      {{ section.settings.heading }}
    </h2>

    <div class="hk-grid">

      {% if section.settings.collection != blank %}

        {% for product in section.settings.collection.products limit: section.settings.products_to_show %}

        <div class="hk-card">

          <!-- Wishlist -->
          {% comment %} <div class="hk-wishlist">
<svg width="20px" height="20px" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M7.5 13.5L7.14645 13.8536C7.34171 14.0488 7.65829 14.0488 7.85355 13.8536L7.5 13.5ZM1.53553 7.53553L1.18198 7.88909H1.18198L1.53553 7.53553ZM6.53553 2.53553L6.18198 2.88909L6.53553 2.53553ZM7.5 3.5L7.14645 3.85355C7.34171 4.04882 7.65829 4.04882 7.85355 3.85355L7.5 3.5ZM8.46447 2.53553L8.11091 2.18198V2.18198L8.46447 2.53553ZM7.85355 13.1464L1.88909 7.18198L1.18198 7.88909L7.14645 13.8536L7.85355 13.1464ZM13.1109 7.18198L7.14645 13.1464L7.85355 13.8536L13.818 7.88909L13.1109 7.18198ZM6.18198 2.88909L7.14645 3.85355L7.85355 3.14645L6.88909 2.18198L6.18198 2.88909ZM7.85355 3.85355L8.81802 2.88909L8.11091 2.18198L7.14645 3.14645L7.85355 3.85355ZM10.9645 1C9.89418 1 8.86772 1.42517 8.11091 2.18198L8.81802 2.88909C9.38729 2.31981 10.1594 2 10.9645 2V1ZM14 5.03553C14 5.84061 13.6802 6.61271 13.1109 7.18198L13.818 7.88909C14.5748 7.13228 15 6.10582 15 5.03553H14ZM15 5.03553C15 2.80677 13.1932 1 10.9645 1V2C12.6409 2 14 3.35905 14 5.03553H15ZM4.03553 2C4.84061 2 5.61271 2.31981 6.18198 2.88909L6.88909 2.18198C6.13228 1.42517 5.10582 1 4.03553 1V2ZM1 5.03553C1 3.35905 2.35905 2 4.03553 2V1C1.80677 1 0 2.80677 0 5.03553H1ZM1.88909 7.18198C1.31981 6.61271 1 5.84061 1 5.03553H0C0 6.10582 0.42517 7.13228 1.18198 7.88909L1.88909 7.18198Z" fill="#000000"/>
</svg>
          </div> {% endcomment %}

        <div>
              <!-- Image -->
          <a href="{{ product.url }}" class="hk-image-link">
            <div class="hk-image-wrapper">
              <img 
                src="{{ product.featured_image | image_url: width: 400 }}" 
                alt="{{ product.title }}"
                loading="lazy">
            </div>
          </a>

        </div>
          <!-- Info -->
          <div class="hk-info">

            <!-- Rating (Static Example – Replace with review app if needed) -->
            <div class="hk-rating-row">
              <div class="hk-rating-badge">4.4 ★</div>
              <div class="hk-reviews">Popular</div>
            </div>

            <!-- Title -->
            <h3 class="hk-title">
              <a href="{{ product.url }}">
                {{ product.title }}
              </a>
            </h3>

            <!-- Price -->
            <div class="hk-price-block">

              <div class="hk-price-row">

                <span class="hk-price">
                  {{ product.price | money }}
                </span>

                {% if product.compare_at_price > product.price %}
                  <span class="hk-old-price">
                    {{ product.compare_at_price | money }}
                  </span>

                  <span class="hk-discount">
                    {{ product.compare_at_price | minus: product.price | times: 100 | divided_by: product.compare_at_price }}% off
                  </span>
                {% endif %}

              </div>

            </div>

            <!-- Buttons -->
            <div class="hk-buttons">

              <form method="post" action="/cart/add">
                <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
                <button type="submit" class="hk-add-to-cart">
                   {% comment %} Add to Cart {% endcomment %}


                <svg width="20px" height="20px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <g id="icomoon-ignore">
                </g>
                <path d="M30.622 9.602h-22.407l-1.809-7.464h-5.027v1.066h4.188l5.198 21.443c-1.108 0.323-1.923 1.334-1.923 2.547 0 1.472 1.193 2.666 2.666 2.666s2.666-1.194 2.666-2.666c0-0.603-0.208-1.153-0.545-1.599h7.487c-0.337 0.446-0.545 0.997-0.545 1.599 0 1.472 1.193 2.666 2.665 2.666s2.666-1.194 2.666-2.666c0-1.473-1.193-2.665-2.666-2.666v0h-11.403l-0.517-2.133h14.968l4.337-12.795zM13.107 27.196c0 0.882-0.717 1.599-1.599 1.599s-1.599-0.717-1.599-1.599c0-0.882 0.717-1.599 1.599-1.599s1.599 0.718 1.599 1.599zM24.836 27.196c0 0.882-0.718 1.599-1.6 1.599s-1.599-0.717-1.599-1.599c0-0.882 0.717-1.599 1.599-1.599 0.882 0 1.6 0.718 1.6 1.599zM11.058 21.331l-2.585-10.662h20.662l-3.615 10.662h-14.462z" fill="#000000">

                </path>
                </svg>


                </button>
              </form>

              <button class="hk-buy-now"
                onclick="window.location.href='{{ product.url }}'">
                Buy Now
              </button>

            </div>

          </div>

        </div>

        {% endfor %}

      {% else %}
        <p>Please select a collection in theme editor.</p>
      {% endif %}

    </div>

  </div>
</section>


<style>
.hk-section {
  padding: 60px 70px;
  {% comment %} background: #f8f8f8; {% endcomment %}
}

.hk-section-title {
  text-align: center;
  font-size: 30px;
  margin-bottom: 40px;
  font-weight: 600;
}

.hk-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 10px;
}

/* Card */
.hk-card {
    display:flex;
    flex-direction:column;
    justify-content:space-between;

  position: relative;
  background: #fff;
  border: 1px solid #e6e6e6;
  border-radius: 16px;
  {% comment %} padding: 18px; {% endcomment %}
  transition: 0.3s ease;
}

.hk-card:hover {
  box-shadow: 0 12px 30px rgba(0,0,0,0.08);
}

/* Wishlist */
.hk-wishlist {
  position: absolute;
  right: 18px;
  top: 18px;
  font-size: 18px;
  cursor: pointer;
}

/* Image */
.hk-image-wrapper {
    {% comment %} width:283px; {% endcomment %}
    {% comment %} height:228px; {% endcomment %}
  text-align: center;
  padding: 15px 0;
   border-radius: 16px 16px 0px 0px;
  background-color: #FFFBEC;
}

.hk-image-wrapper img {
  max-width: 100%;
  {% comment %} width:250px; {% endcomment %}
  max-height: 180px;
  object-fit:cover;
  display:inline-block;
}

.hk-info{
padding:18px;
}

/* Rating */
.hk-rating-row {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
}

.hk-rating-badge {
  background: #1aa260;
  color: #fff;
  font-size: 13px;
  padding: 4px 8px;
  border-radius: 6px;
}

.hk-reviews {
  font-size: 13px;
  color: #555;
}

/* Title */
.hk-title {
  font-size: 15px;
  margin: 10px 0;
  line-height: 1.4;
  min-height: 20px;
}

.hk-title a {
  text-decoration: none;
  color: #333;
}

/* Pricing */
.hk-price-row {
  display: flex;
  align-items: center;
  gap: 8px;
}

.hk-price {
  font-size: 18px;
  font-weight: 600;
}

.hk-old-price {
  text-decoration: line-through;
  color: #888;
  font-size: 14px;
}

.hk-discount {
  color: #1aa260;
  font-size: 14px;
  font-weight: 500;
}

/* Buttons */
.hk-buttons {
  margin-top: 15px;
  display: flex;
  justify-content:space-evenly;
  flex-direction: row-reverse;
  gap: 8px;
}

.hk-add-to-cart {
  border: 1px solid #FF8914;
  background: #fff4ea;
  color: #ff7a00;
  padding: 10px;
  {% comment %} width:100%; {% endcomment %}
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
  transition: 0.2s;
}

.hk-add-to-cart:hover {
  background: #fff4ea;
}

.hk-buy-now {
    width: stretch;
  background: #FF8914;
  color: #fff;
  border: none;
  padding: 11px;
  border-radius: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: 0.2s;
}

.hk-buy-now:hover {
  background: #e86f00;
}

/* Responsive */

@media (max-width: 1200px) {
  .hk-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (max-width: 768px) {
  .hk-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 480px) {
  .hk-grid {
    grid-template-columns: 1fr;
  }
}
</style>